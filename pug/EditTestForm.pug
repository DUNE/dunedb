extend EditForm

block metaschema
  script(type='text/javascript').
    var builder_wizard = false

    var metaschema = {
      "components": [
      
        {
          "label": "Commit Form",
          "showValidations": false,
          "theme": "info",
          "disableOnInvalid": true,
          "tableView": false,
          "key": "submit",
          "type": "button",
          "input": true,
          "validate": {
            "unique": false,
            "multiple": false
          }
        },
        {
          "label": "formId",
          "key": "formId",
          "type": "hidden",
          "input": true,
          "tableView": false,
          "validate": {
            "unique": false,
            "multiple": false
          }
        },
        {
          "label": "Form Name",
          "spellcheck": true,
          "tableView": true,
          "validate": {
            "unique": false,
            "required": true,
            "multiple": false
          },
          "key": "formName",
          "type": "textfield",
          "input": true
        },
        {
            "label": "Columns",
            "columns": [
                {
                    "components": [
                        {
                            "label": "Revised on",
                            "disabled": true,
                            "tableView": false,
                            "enableMinDateInput": false,
                            "datePicker": {
                                "disableWeekends": false,
                                "disableWeekdays": false
                            },
                            "enableMaxDateInput": false,
                            "key": "insertion.insertDate",
                            "type": "datetime",
                            "input": true,
                            "widget": {
                                "type": "calendar",
                                "displayInTimezone": "viewer",
                                "language": "en",
                                "useLocaleSettings": false,
                                "allowInput": true,
                                "mode": "single",
                                "enableTime": true,
                                "noCalendar": false,
                                "format": "yyyy-MM-dd hh:mm a",
                                "hourIncrement": 1,
                                "minuteIncrement": 1,
                                "time_24hr": false,
                                "minDate": null,
                                "disableWeekends": false,
                                "disableWeekdays": false,
                                "maxDate": null
                            },
                            "hideOnChildrenHidden": false
                        }
                    ],
                    "width": 3,
                    "offset": 0,
                    "push": 0,
                    "pull": 0,
                    "size": "md"
                },
                {
                    "components": [
                        {
                            "label": "Version",
                            "mask": false,
                            "spellcheck": true,
                            "disabled": true,
                            "tableView": false,
                            "delimiter": false,
                            "requireDecimal": false,
                            "inputFormat": "plain",
                            "key": "validity.version",
                            "type": "number",
                            "input": true,
                            "hideOnChildrenHidden": false
                        }
                    ],
                    "width": 3,
                    "offset": 0,
                    "push": 0,
                    "pull": 0,
                    "size": "md"
                },
                {
                    "components": [
                        {
                            "label": "Last Revised By",
                            "disabled": true,
                            "tableView": true,
                            "key": "insertion.user.displayName",
                            "type": "textfield",
                            "input": true,
                            "hideOnChildrenHidden": false
                        }
                    ],
                    "size": "md",
                    "width": 3,
                    "offset": 0,
                    "push": 0,
                    "pull": 0
                },
                {
                    "components": [
                        {
                            "label": "Form goes live on",
                            "tableView": false,
                            "enableMinDateInput": false,
                            "datePicker": {
                                "disableWeekends": false,
                                "disableWeekdays": false
                            },
                            "enableMaxDateInput": false,
                            "key": "validity.startDate",
                            "type": "datetime",
                            "input": true,
                            "widget": {
                                "type": "calendar",
                                "displayInTimezone": "viewer",
                                "language": "en",
                                "useLocaleSettings": false,
                                "allowInput": true,
                                "mode": "single",
                                "enableTime": true,
                                "noCalendar": false,
                                "format": "yyyy-MM-dd hh:mm a",
                                "hourIncrement": 1,
                                "minuteIncrement": 1,
                                "time_24hr": false,
                                "minDate": null,
                                "disableWeekends": false,
                                "disableWeekdays": false,
                                "maxDate": null
                            },
                            "hideOnChildrenHidden": false
                        }
                    ],
                    "size": "md",
                    "width": 3,
                    "offset": 0,
                    "push": 0,
                    "pull": 0
                }
            ],
            "tableView": false,
            "key": "columns",
            "type": "columns",
            "input": false
        },
        {
          "label": "Tags",
          "labelPosition": "left-right",
          "placeholder": "categories",
          "tooltip": "Component types or categories this form relates to",
          "tableView": false,
          "storeas": "array",
          "key": "tags",
          "type": "tags",
          "input": true,
          "defaultValue": [
            "all"
          ]
        },
        {
          "label": "formbuilder",
          "tag": "div",
          "className": "formbuilder_area",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "refreshOnChange": false,
          "tableView": false,
          "key": "formbuilder",
          "type": "htmlelement",
          "input": false,
          "validate": {
            "unique": false,
            "multiple": false
          }
        },
        {
          "label": "schema",
          "key": "schema",
          "type": "hidden",
          "input": true,
          "tableView": false,
          "validate": {
            "unique": false,
            "multiple": false
          }
        },
        {     
            "title": "Post-entry processing",
            "collapsible": true,
            "tableView": false,
            
            "key": "postEntryProcessing",
            "type": "panel",
            "label": "Panel",
            "input": false,
            "components": [
                 {
                    "html": "<p>See notes at <a href=\"/docs/processing.md\">/docs/processing.md</a></p>",
                    "label": "Process Notes",
                    "refreshOnChange": false,
                    "tableView": false,
                    "key": "processNotes",
                    "type": "content",
                    "input": false
                  },
                  {
                    "label": "Processes",
                    "keyLabel": "Process ID",
                    "addAnother": "Add a process",
                    "hideLabel": true,
                    "tableView": false,
                    "key": "processes",
                    "type": "datamap",
                    "input": true,
                    "valueComponent": {
                      "input": true,
                      "key": "key",
                      "tableView": true,
                      "label": "Algorithm",
                      "rows": 20,
                      "hideLabel": true,
                      "type": "textarea",
                     "customClass": "fixed-width-textarea",
                      "modalEdit": true
                    }
                  },                 
            ],
            "collapsed": true
        },
        {
          "label": "Commit Form",
          "showValidations": false,
          "theme": "info",
          "disableOnInvalid": true,
          "tableView": false,
          "key": "submit",
          "type": "button",
          "input": true,
          "validate": {
            "unique": false,
            "multiple": false
          }
        }
      ]
    };




